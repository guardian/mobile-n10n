stacks: [mobile-notifications]
regions: [eu-west-1]

deployments:
  fakebreakingnewslambda-upload:
    type: aws-lambda
    app: fakebreakingnewslambda
    parameters:
      bucketSsmLookup: true
      bucketSsmKey: /account/services/artifact.bucket.n10n
      lookupByTags: true
      fileName: fakebreakingnewslambda.jar
      prefixStack: false
    actions:
      - uploadLambda
  fakebreakingnewslambda-cfn:
    type: cloud-formation
    app: fakebreakingnewslambda
    parameters:
      templateStagePaths:
        CODE: FakeBreakingNewsLambda-CODE.template.json
        PROD: FakeBreakingNewsLambda-PROD.template.json
    dependencies:
      - fakebreakingnewslambda-upload
  fakebreakingnewslambda-update:
    type: aws-lambda
    app: fakebreakingnewslambda
    parameters:
      bucketSsmLookup: true
      bucketSsmKey: /account/services/artifact.bucket.n10n
      lookupByTags: true
      fileName: fakebreakingnewslambda.jar
      prefixStack: false
    actions:
      - updateLambda
    dependencies:
      - fakebreakingnewslambda-cfn
