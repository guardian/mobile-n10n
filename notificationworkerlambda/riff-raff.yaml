stacks: [mobile-notifications]
regions: [eu-west-1]

deployments:
  notificationworkerlambda:
    type: aws-lambda
    app: notificationworkerlambda
    parameters:
      bucket: mobile-notifications-dist
      functionNames: [ios-notification-worker-, ios-notification-worker-sender-, android-notification-worker-sender-, android-notification-worker-, registration-cleaning-worker-, topic-counter-, mobile-notifications-harvester-]
      fileName: notificationworkerlambda.jar
      prefixStack: false
    dependencies: [ios-notification-worker-cfn, android-notification-worker-cfn, registration-cleaning-worker-cfn, topic-counter-cfn]
  harvester-cfn:
    type: cloud-formation
    app: harvester
    parameters:
      templatePath: harvester-cfn.yaml
  ios-notification-worker-cfn:
    type: cloud-formation
    app: ios-notification-worker
    parameters:
      prependStackToCloudFormationStackName: false
      cloudFormationStackName: ios-notification-worker-cfn
      templatePath: platform-worker-cfn.yaml
  android-notification-worker-cfn:
    type: cloud-formation
    app: android-notification-worker
    parameters:
      prependStackToCloudFormationStackName: false
      cloudFormationStackName: android-notification-worker-cfn
      templatePath: platform-worker-cfn.yaml
  registration-cleaning-worker-cfn:
    type: cloud-formation
    app: registration-cleaning-worker
    parameters:
      prependStackToCloudFormationStackName: false
      cloudFormationStackName: registration-cleaning-worker-cfn
      templatePath: registration-cleaning-worker-cfn.yaml
  topic-counter-cfn:
    type: cloud-formation
    app: topic-counter
    parameters:
      prependStackToCloudFormationStackName: false
      cloudFormationStackName: topic-counter-cfn
      templatePath: topic-counter-cfn.yaml

