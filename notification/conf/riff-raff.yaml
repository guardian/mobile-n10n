stacks: [mobile-notifications]
regions: [eu-west-1]
deployments:
  notification-cfn:
    type: cloud-formation
    app: notification
    parameters:
      amiEncrypted: true
      amiParametersToTags:
        AMINotification:
          Recipe: mobile-java11-jammy-ARM-with-cdk-base
          AmigoStage: PROD
      templateStagePaths:
        CODE: Notification-CODE.template.json
        PROD: Notification-PROD.template.json
      templateStageParameters:
        CODE:
          SloSqsQueueArn: /notifications/CODE/mobile-notifications/notifications.queues.sloMonitoringArn
          LoggingStreamName: /account/services/logging.stream.name.code
        PROD:
          SloSqsQueueArn: /notifications/PROD/mobile-notifications/notifications.queues.sloMonitoringArn
          LoggingStreamName: /account/services/logging.stream.name
  notification:
    type: autoscaling
    parameters:
      asgMigrationInProgress: true
      bucketSsmLookup: true
      bucketSsmKey: /account/services/artifact.bucket.n10n
    dependencies: [notification-cfn]

